window.ebO&&ebO.extensionHooks&&ebO.extensionHooks.push(function(e){"use strict";function t(){n=this,EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.SHOW_AD,n.handlers.handleBeforeShowAd,EBG.Events.EventTiming.BEFORE,l)}var n,a,o,i,r=e.adId,s=e.rnd,d=e.uid,l={myAd:d};EBG.customFormats=EBG.customFormats||{},EBG.customFormats[d]=EBG.customFormats[d]||{};try{parent.EBG&&(parent.EBG.customFormats=parent.EBG.customFormats||{},parent.EBG.customFormats[d]=EBG.customFormats[d])}catch(e){}var p=null,c=function(e){EBG.callSuperConstructor(c,this,[e])};c.prototype={_show:function(){p=this;var t=EBG.API.Ad.getAdData(d,"uponShow")>1&&EBG.API.Ad.shouldExpand(d);n.defaultCustomFormatVars={mdIsAutoExpand:t,mdWasAutoExpand:t,mdAdBuilder:!!EBG.API.Ad.getAdData(d,"adBuilder"),mdParentLevelsToResize:0,mdBackupImgPath:void 0,mdAutoRepositionInterval:0,mdIsDomainConfigEnabled:!1,mdProgSettingsFolderPath:"//services.serving-sys.com/programmatic/DomainList/",mdEyeDivZIndex:void 0,mdAutoCollapseTimer:0,mdInteractionsCancelAutoCollapse:!1},n.initCustomVarDefaults(),window["ebCSOverride_"+e.adId]&&window["ebCSOverride_"+e.adId](d,n);var a=parseInt(n.mdAutoRepositionInterval,10);!isNaN(a)&&a>0&&EBG.API.Ad.setAdData(d,{locationPolling:EBG.Initializer._setLocationPolling(a),forceLocationPolling:!0});new n.ProgrammaticManager(function(t){if(window["ebCSOverrideAP_"+e.adId]&&window["ebCSOverrideAP_"+e.adId](d,n),n.isDebug){n.log("Custom Var Values after programmatic logic");for(var a in e.customJSVars)e.customJSVars.hasOwnProperty(a)&&n.log("["+a+"] == ["+e.customJSVars[a]+"]")}EBG.callSuperFunction(c,p,"_show",[e])})}};var m=new EBG.Events.EventSubscription(EBG.Events.EventNames.CREATE_AD,function(e){EBG.declareClass(c,e.eventData.currentClass),e.eventData.currentClass=c});m.timing=EBG.Events.EventTiming.BEFORE,m.dispatcherFilters={"_adConfig.rnd":s},EBG.eventMgr.subscribeToEvent(m),t.prototype={isDebug:!0,defaultCustomFormatVars:void 0,isPolite:void 0,wasPolite:void 0,repositionInterval:void 0,displayWin:void 0,pageWin:void 0,subs:void 0,ebDiv:void 0,panels:void 0,defaultPanel:void 0,defaultPanelName:void 0,iframe:void 0,bannerDiv:void 0,subscribedRSO:void 0,CCs:void 0,curScrollPos:{},banner1x1:void 0,capturedEyeDiv:null,isBannerReady:!1,pm:null,stylesheetOnExpand:{},stylesheetOnCollapse:{},stylesheetOnLoad:void 0,handlers:{handleBeforeShowAd:function(){return n._handleBeforeShowAd.apply(this,arguments)},handleAfterShowAd:function(){return n._handleAfterShowAd.apply(this,arguments)},handleCounterInteraction:function(){return n._handleCounterInteraction.apply(this,arguments)},handlePreExpand:function(){return n._handlePreExpand.apply(this,arguments)},handleBeforeExpand:function(){return n._handleBeforeExpand.apply(this,arguments)},handleAfterExpand:function(){return n._handleAfterExpand.apply(this,arguments)},handleBeforeCollapse:function(){return n._handleBeforeCollapse.apply(this,arguments)},handleBeforeAddCreatives:function(){return n._handleBeforeAddCreatives.apply(this,arguments)},handleAfterAddCreatives:function(){return n._handleAfterAddCreatives.apply(this,arguments)},handleOntimePageResize:function(){return n._handleOntimePageResize.apply(this,arguments)},handleOntimePageScroll:function(){return n._handleOntimePageScroll.apply(this,arguments)},handleOntimeOrientation:function(){return n._handleOntimeOrientation.apply(this,arguments)},handleCreativeContainerReady:function(){return n._handleCreativeContainerReady.apply(this,arguments)},handleAfterCollapse:function(){return n._handleAfterCollapse.apply(this,arguments)},handleBeforeAdUnload:function(){return n._handleBeforeAdUnload.apply(this,arguments)},handleMessageReceived:function(){return n._handleMessageReceived.apply(this,arguments)}},_handleBeforeShowAd:function(e){if(n.log("_handleBeforeShowAd: isDefaultImage="+e.eventData.isDefaultImage+", dlm="+EBG.API.Ad.getAdData(d,"dlm")+", uponShow="+EBG.API.Ad.getAdData(d,"uponShow")),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.SHOW_AD,n.handlers.handleAfterShowAd,EBG.Events.EventTiming.AFTER,l),!e.eventData.isDefaultImage){if(a=e.dispatcher,o=EBG.API.os,i=EBG.API.browser,n.isPolite=n.wasPolite=1===EBG.API.Ad.getAdData(d,"dlm"),n.repositionInterval=void 0,n.displayWin=EBG.API.Adaptor.getDisplayWin(),n.pageWin=EBG.API.Adaptor.getPageWin(),n.displayWin.gEbPIT=n.displayWin.gEbPIT||{},n.subs=n.displayWin.gEbPIT.subscriptions=n.displayWin.gEbPIT.subscriptions||{},EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.ADD_CREATIVES,n.handlers.handleBeforeAddCreatives,EBG.Events.EventTiming.BEFORE,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.ADD_CREATIVES,n.handlers.handleAfterAddCreatives,EBG.Events.EventTiming.AFTER,l),EBG.API.EventManager.subscribeToEvent(EBG.EBMessage.EXPAND,n.handlers.handlePreExpand,EBG.Events.EventTiming.BEFORE,l),n.mdInteractionsCancelAutoCollapse&&EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.HANDLE_COUNTER_INTERACTION,n.handlers.handleCounterInteraction,EBG.Events.EventTiming.BEFORE),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.EXPAND,n.handlers.handleBeforeExpand,EBG.Events.EventTiming.BEFORE,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.EXPAND,n.handlers.handleAfterExpand,EBG.Events.EventTiming.AFTER,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.COLLAPSE,n.handlers.handleBeforeCollapse,EBG.Events.EventTiming.BEFORE,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.CREATIVE_CONTAINER_READY,n.handlers.handleCreativeContainerReady,EBG.Events.EventTiming.ONTIME,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.COLLAPSE,n.handlers.handleAfterCollapse,EBG.Events.EventTiming.AFTER,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.AD_UNLOAD,n.handlers.handleBeforeAdUnload,EBG.Events.EventTiming.BEFORE),n.addWindowListener("message","handleMessageReceived",n.handlers.handleMessageReceived),EBG.adaptor.isSafeFrame())for(var t in n.messageHandlers)n.messageHandlers.hasOwnProperty(t)&&EBG.pm.bind(t,n.handlers.handleMessageReceived,n,n.displayWin);if(n.ebDiv=EBG.API.Ad.getPlaceholder(d),n.panels=EBG.API.Ad.getAdData(d,"panels"),n.panels)for(var r in n.panels)if(n.panels.hasOwnProperty(r)){n.defaultPanelName=r;break}n.isPolite||n._subscribeToResizeScrollOrientation("_handleBeforeShowAd:not polite")}},_handleAfterShowAd:function(e){n.log("_handleAfterShowAd: isDefaultImage="+e.eventData.isDefaultImage+", dlm="+EBG.API.Ad.getAdData(d,"dlm")+", uponShow="+EBG.API.Ad.getAdData(d,"uponShow")),e.eventData.isDefaultImage&&void 0!==n.mdBackupImgPath?n.showFullSizedBackupImage():n.wasPolite||(n.iframe=EBG.API.Banner.getElements(d).banner,n.bannerDiv=EBG.API.Banner.getElements(d).bannerDiv,n._onloadInjectCSSandJS(e))},_onloadInjectCSSandJS:function(e){EBG.API.Ad.getCustomVar(d,"_mdCssOnLoad")&&(n.stylesheetOnLoad=n.addStylesheetToHead(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdCssOnLoad"),e.dispatcher)),n.log("Injecting CSS on load; removing on unload? "+EBG.API.Ad.getCustomVar(d,"_mdCssOnLoadRemoveOnUnload"),EBG.API.Ad.getCustomVar(d,"_mdCssOnLoad"))),EBG.API.Ad.getCustomVar(d,"_mdJsOnLoad")&&(n.execJS(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdJsOnLoad"),e.dispatcher)),n.log("Executing JS on load",EBG.API.Ad.getCustomVar(d,"_mdJsOnLoad")))},_handleCounterInteraction:function(e){var t=e.eventData;if(t){var a=t.interaction;if(a){var o=a.interactionData;if(o){var i=o.initiationType,r=o.reportingName;i&&r&&"user"===i&&"default"!==r&&r!==EBG.API.Ad.getAdData(d,"defaultPanelName")&&(n.log("Cancelling Collapse timer"),EBG.API.Panel.cancelCollapseTimer(d))}}}},_handlePreExpand:function(e){var t=parseInt(n.mdAutoCollapseTimer);if(e&&t>0){var a=e.eventData,o=e.dispatcher,i=a&&a.panelName?a.panelName:o&&o.panelName?o.panelName:null;i&&i.toLowerCase()===n.defaultPanelName.toLowerCase()&&(a||(e.eventData={}),e.eventData.autoCollapse=t,n.log("_handlePreExpand: setting autoCollapseTimer on default panel to "+t))}},_handleBeforeExpand:function(e){if(n.log("_handleBeforeExpand: panelName="+e.dispatcher.panelName),void 0!==n.mdEyeDivZIndex){var t=EBG.API.Adaptor.getEyeDiv(),a=EBG.API.Adaptor.getStyle(t,"zIndex");null===n.capturedEyeDiv&&(n.capturedEyeDiv=a),a!==n.mdEyeDivZIndex&&EBG.API.Adaptor.setStyle(t,{zIndex:n.mdEyeDivZIndex})}var o=e.dispatcher.panelName.toLowerCase()===n.defaultPanelName.toLowerCase();if(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpand")){var i=[7,8,9,10,11,12].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpandType"))>=0,r=[4,5,6,10,11,12].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpandType"))>=0;!i&&!o||r&&EBG.API.Ad.isExpanded(d)||(n.stylesheetOnExpand[e.dispatcher.panelName.toLowerCase()]=n.addStylesheetToHead(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpand"),e.dispatcher)))}if(EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelExpand")){var s=3===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelExpandType")||4===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelExpandType"),l=2===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelExpandType")||4===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelExpandType");!s&&!o||l&&EBG.API.Ad.isExpanded(d)||n.execJS(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelExpand"),e.dispatcher))}if("billboard"===e.dispatcher.panelName){n.displayWin.document.querySelector("body");var p=document.createElement("div");p.id="pushDiv",n.displayWin.document.body.insertBefore(p,n.displayWin.document.body.firstChild),n.pushDiv=n.displayWin.document.getElementById("pushDiv");EBG.API.Adaptor.getViewPortMetrics();EBG.API.Adaptor.setStyle(n.pushDiv,{position:"relative",marginTop:n.marginTop||"270px",webkitTransition:"margin-top 1s ease-out",transition:"margin-top 1s ease-out;"}),n.pushDiv.style.setProperty("-webkit-transition","margin-top 0.5s ease-out"),n.pushDiv.style.setProperty("transition","margin-top 0.5s ease-out")}},_handleAfterExpand:function(e){n.log("_handleAfterExpand: panelName="+e.dispatcher.panelName),n.panelDiv=n.displayWin.document.getElementById(e.dispatcher.props.panel.id),n.panelFrm=n.displayWin.document.getElementById(e.dispatcher.iframeId),n.panelId=e.dispatcher.props.panel.id,"billboard"===e.dispatcher.panelName&&n.panelDiv.style.setProperty("top","10px")},_handleBeforeCollapse:function(e){n.log("_handleBeforeCollapse: panelName="+e.dispatcher.panelName),n.setDefault("mdIsAutoExpand",!1,!0)},_handleAfterCollapse:function(e){if(n.log("_handleAfterCollapse: panelName="+e.dispatcher.panelName),void 0!==n.mdEyeDivZIndex&&!EBG.API.Ad.isExpanded(d)&&null!==n.capturedEyeDiv){var t=EBG.API.Adaptor.getEyeDiv();t&&EBG.API.Adaptor.setStyle(t,{zIndex:n.capturedEyeDiv}),n.capturedEyeDiv=null}var a,o=e.dispatcher.panelName.toLowerCase()===n.defaultPanelName.toLowerCase();if(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpand")){a=[7,8,9,10,11,12].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpandType"))>=0;var i=[2,3,5,6,8,9,11,12].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpandType"))>=0,r=[3,6,9,12].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpandType"))>=0;!a&&!o||!i||r&&EBG.API.Ad.isExpanded(d)||(n.stylesheetOnExpand[e.dispatcher.panelName.toLowerCase()].parentNode.removeChild(n.stylesheetOnExpand[e.dispatcher.panelName.toLowerCase()]),delete n.stylesheetOnExpand[e.dispatcher.panelName.toLowerCase()])}if(!EBG.API.Ad.isExpanded(d)&&[3,6,9,12].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelExpandType"))>=0){var s;for(s in n.stylesheetOnExpand)n.stylesheetOnExpand.hasOwnProperty(s)&&(n.stylesheetOnExpand[s].parentNode.removeChild(n.stylesheetOnExpand[s]),delete n.stylesheetOnExpand[s])}if(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelCollapse")){a=[3,4].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelCollapseType"))>=0;var l=[2,4].indexOf(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelCollapseType"))>=0;!a&&!o||l&&EBG.API.Ad.isExpanded(d)||(n.stylesheetOnCollapse[e.dispatcher.panelName.toLowerCase()]=n.addStylesheetToHead(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdCssOnPanelCollapse"),e.dispatcher)))}if(EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelCollapse")){var p=3===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelCollapseType")||4===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelCollapseType"),c=2===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelCollapseType")||4===EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelCollapseType");!p&&!o||c&&EBG.API.Ad.isExpanded(d)||n.execJS(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdJsOnPanelCollapse"),e.dispatcher))}},_handleBeforeAddCreatives:function(e){n.log("_handleBeforeAddCreatives:"+e.eventData.creativeType+":panelName="+(e.eventData.panelName||"banner")),e.eventData.creativeType===EBG.Events.EventNames.ADD_HTML5_MAIN_CREATIVE?n.isPolite&&(n._subscribeToResizeScrollOrientation("_handleBeforeAddCreatives:banner:was polite"),n.isPolite=!1):e.eventData.creativeType===EBG.Events.EventNames.ADD_HTML5_PANEL_CREATIVE&&(n.defaultPanel=a._panels[n.defaultPanelName.toLowerCase()])},_handleAfterAddCreatives:function(e){n.log("_handleAfterAddCreatives:"+e.eventData.creativeType+":panelName="+(e.eventData.panelName||"banner"))},_subscribeToResizeScrollOrientationDisplayWindow:function(){EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.PAGE_RESIZE,n.handlers.handleOntimePageResize,EBG.Events.EventTiming.ONTIME,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.PAGE_SCROLL,n.handlers.handleOntimePageScroll,EBG.Events.EventTiming.ONTIME,l),EBG.API.EventManager.subscribeToEvent(EBG.Events.EventNames.SCREEN_ORIENTATION,n.handlers.handleOntimeOrientation,EBG.Events.EventTiming.ONTIME)},_subscribeToResizeScrollOrientation:function(e){if(!n.subscribedRSO){if(window!==n.pm.topWin)try{EBG.API.EventManager.subscribeToElementEvent(n.pm.topWin.document.body,"scroll",n.handlers.handleOntimePageScroll,EBG.Events.EventTiming.ONTIME)}catch(e){}n._subscribeToResizeScrollOrientationDisplayWindow(),n.subscribedRSO=!0,n.log("_subscribeToResizeScrollOrientation:triggered by "+e)}},_handleMessageReceived:function(e,t){try{var a="object"==typeof e&&e.data?JSON.parse(e.data):"object"==typeof t&&t.data&&"string"==typeof t.data?JSON.parse(t.data):"object"==typeof t&&t.data&&t.data.uid?t:{};a.type&&a.data&&a.data.uid&&a.data.uid===d&&n.messageHandlers.hasOwnProperty(a.type)&&(n.log("_handleMessageReceived:"+a.type,a),n.messageHandlers[a.type](a))}catch(e){n.log("_handleMessageReceived:catch",e)}},messageHandlers:{addCustomScriptEventListener:function(e){n.subs[e.data.listenerId]=e.data},dispatchCustomScriptEvent:function(e){for(var t in n.subs)if(n.subs[t]){var a=n.subs[t].eventName===e.data.eventName,o=!(e.data.uid===n.subs[t].uid)&&!e.data.interAd;if(a&&!o)if(n.subs[t].callback)try{n.subs[t].callback(e.data)}catch(e){delete n.subs[t]}else{var i=[];i[i.length]=n.subs[t].listenerId,e.data.listenerIds=i;try{e.data.type="eventCallback",n.CCs[n.subs[t].creativeIFrameId]._sendMessage("eventCallback",e.data)}catch(e){}}}},removeCustomScriptEventListener:function(e){delete n.subs[e.data.listenerId]},removeAd:function(){n.removeAd()},setCreativeVersion:function(e){e.data.creativeVersion&&(n.handleSetCreativeVersion(e.data),window.setTimeout(function(){n.isBannerReady=!0,n.dispatchScrollPos()},250))},dispatchScrollPos:function(){n.dispatchScrollPos(!0)},setInfo:function(e){n.marginTop=e.data.topGap},collapseRequest:function(){n.onCollapseRequested(),n.isExpanded=!1},expansionRequest:function(){n.onExpandRequested(),n.isExpanded=!0},baseExpansionRequest:function(){try{n.panelFrm.contentWindow.postMessage(JSON.stringify({type:"baseExpansion",data:{}}),"*")}catch(e){console.log("Error: ",e)}}},_handleOntimePageResize:function(e){n.dispatchScrollPos()},_handleOntimePageScroll:function(e){},_handleOntimeOrientation:function(e){n.log("_handleOntimeOrientation:"+e.eventData.screenOrientation),setTimeout(function(){var e=EBG.API.Adaptor.getViewPortMetrics();!0===n.isExpanded&&n.setMarginTop(e.height),EBG.API.Adaptor.setStyle(n.panelFrm,{position:"fixed",top:EBG.px(0),left:EBG.px(0),width:EBG.px(e.width),height:EBG.px(e.height),fontSize:"0px",whiteSpace:"nowrap",visibility:"visible"}),EBG.API.Adaptor.setStyle(n.panelDiv,{position:"fixed",top:EBG.px(0),left:EBG.px(0),width:EBG.px(e.width),height:EBG.px(e.height),fontSize:"0px",whiteSpace:"nowrap",visibility:"visible"})},50)},_handleCreativeContainerReady:function(e){n.log("_handleCreativeContainerReady:"+(e.dispatcher.panelName||"banner")),n.wasPolite&&!e.dispatcher.panelName&&(n.iframe=EBG.API.Banner.getElements(d).banner,n.bannerDiv=EBG.API.Banner.getElements(d).bannerDiv,n._onloadInjectCSSandJS(e));var t=e.dispatcher;n.CCs=n.CCs||{},n.CCs[t.iframeId]=t,t._sendMessage("sendCreativeId",{type:"sendCreativeId",creativeIFrameId:t.iframeId,uid:d,viewport:EBG.API.Adaptor.getViewPortMetrics()}),e.dispatcher.panelName?e.dispatcher.panelName.toLowerCase()===n.defaultPanelName.toLowerCase()&&n.banner1x1&&EBG.API.Banner.setViewabilityElem(d,e.dispatcher._iframe.id):n.banner1x1="1"===t._iframe.width&&"1"===t._iframe.height},_handleBeforeAdUnload:function(e){n.log("_handleBeforeAdUnload"),EBG.API.Ad.getCustomVar(d,"_mdCssOnLoad")&&EBG.API.Ad.getCustomVar(d,"_mdCssOnLoadRemoveOnUnload")&&n.stylesheetOnLoad.parentNode.removeChild(n.stylesheetOnLoad),EBG.API.Ad.getCustomVar(d,"_mdCssOnUnload")&&n.addStylesheetToHead(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdCssOnUnload"),e.dispatcher)),EBG.API.Ad.getCustomVar(d,"_mdJsOnUnload")&&n.execJS(n.tokenReplace(EBG.API.Ad.getCustomVar(d,"_mdJsOnUnload"),e.dispatcher))},dispatchCustomScriptEvent:function(e,t){var a={type:"dispatchCustomScriptEvent",data:t||{}};a.data.uid=d,a.data.eventName=e,n._handleMessageReceived(void 0,a)},addCustomScriptEventListener:function(e,t,a){var o={uid:d,listenerId:Math.ceil(1e9*Math.random()),eventName:e,interAd:!!a,callback:t};return n._handleMessageReceived(void 0,{data:o,type:"addCustomScriptEventListener"}),o.listenerId},removeCustomScriptEventListener:function(e){n._handleMessageReceived(void 0,{data:{uid:d,listenerId:e},type:"removeCustomScriptEventListener"})},initCustomVarDefaults:function(){for(var e in n.defaultCustomFormatVars)n.defaultCustomFormatVars.hasOwnProperty(e)&&n.setDefault(e,n.defaultCustomFormatVars[e])},setDefault:function(e,t,a){EBG.API.Ad.setCustomVar(d,e,t,!!a),n[e]=EBG.API.Ad.getCustomVar(d,e)},setDefaultWithAppend:function(e,t,a){var o=a||"",i=EBG.API.Ad.getCustomVar(d,e);i="string"==typeof i?i+o+t:t,n.setDefault(e,i,!0)},dispatchScrollPos:function(e){if(e)window.setTimeout(n.dispatchScrollPos,250);else{var t=n.getScrollPos();!n.isBannerReady||n.curScrollPos.scrollXPercent===t.scrollXPercent&&n.curScrollPos.scrollYPercent===t.scrollYPercent||(n.curScrollPos.scrollXPercent=t.scrollXPercent,n.curScrollPos.scrollYPercent=t.scrollYPercent,n.dispatchCustomScriptEvent("pageScroll",t))}},getScrollPos:function(){var e=EBG.API.Adaptor.getPageMetrics(n.pm.topWin),t=EBG.API.Adaptor.getViewPortMetrics(n.pm.topWin),a=0,o=0;return e.scrollWidth-t.width>0&&(o=parseInt(e.scrollLeft/(e.scrollWidth-t.width)*100)),e.scrollHeight-t.height>0&&(a=parseInt(e.scrollTop/(e.scrollHeight-t.height)*100)),{scrollXPercent:Math.min(Math.max(o,0),100),scrollYPercent:Math.min(Math.max(a,0),100)}},log:function(){if(n.isDebug){var e,t;e=Array.prototype.slice.call(arguments),t="PL_AdPulse ("+(t=new Date).getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds()+"): ",e.unshift(t);try{window.console&&console.log&&(console.log.apply?console.log.apply(console,e):console.log(e))}catch(e){}}},removeAd:function(){EBG.API.Ad.unload(d)},addWindowListener:function(e,t,a){n.handlers[t]=function(){return a.apply(this,arguments)},n.displayWin.addEventListener?n.displayWin.addEventListener(e,n.handlers[t],!1):n.displayWin.attachEvent&&n.displayWin.attachEvent("on"+e,n.handlers[t])},removeWindowListener:function(e,t,a){n.displayWin.removeEventListener?n.displayWin.removeEventListener(e,n.handlers[t],!1):n.displayWin.detachEvent&&n.displayWin.detachEvent("on"+e,n.handlers[t]),delete n.handlers[t]},handleSetCreativeVersion:function(e){n.versions.creativeIds+=(""!==n.versions.creativeIds?"|":"")+e.creativeId,n.versions.creativeVers+=(""!==n.versions.creativeVers?"|":"")+e.creativeVersion,n.versions.creativeLastMods+=(""!==n.versions.creativeLastMods?"|":"")+e.creativeLastModified},showFullSizedBackupImage:function(){try{var e=EBG.API.Ad.getAdData(d,"assets")[n.mdBackupImgPath];if(!e)return;n.ebDiv||(n.ebDiv=EBG.API.Ad.getPlaceholder(d));var t=n.ebDiv.firstChild,a=t.width=e.width,o=t.height=e.height,i=e.dsPath;EBG.API.Adaptor.setStyleToElems([n.ebDiv,t],{width:EBG.px(a),height:EBG.px(o)}),t.src=EBG.API.Ad.getAdData(d,"resourcePath")+i,n.mdParentLevelsToResize>0&&setTimeout(function(){n.resizeBackupImageParentNodes(a,o,n.mdParentLevelsToResize)},100)}catch(e){}},resizeBackupImageParentNodes:function(e,t,a){try{for(var o=[n.ebDiv.parentNode],i=1;i<a;i++)o[i]=o[i-1].parentNode;for(var r,s=0;s<o.length;s++){var d=o[s];d&&((r=EBG.API.Adaptor.getElementMetrics(d)).width<e&&EBG.API.Adaptor.setStyle(d,{minWidth:EBG.px(e)}),r.height<t&&EBG.API.Adaptor.setStyle(d,{minHeight:EBG.px(t)}))}}catch(e){}},tokenReplace:function(e,t){var a=e.replace(/\%ebDivID\%/g,n.ebDiv.id);return t&&t.panelName&&(a=a.replace(/\%panelIframeID\%/g,t.iframeId),t._iframe.parentNode&&t._iframe.parentNode.id&&(a=a.replace(/\%panelDivID\%/g,t._iframe.parentNode.id))),a=a.replace(/\%bannerIframeID\%/g,n.iframe.id),a=a.replace(/\%bannerDivID\%/g,n.iframe.parentNode.id),a=a.replace(/\%defaultPanelName\%/g,n.defaultPanelName),a=a.replace(/\%adid\%/g,r),a=a.replace(/\%rnd\%/g,s),a=a.replace(/\%uid\%/g,d),a=n.htmlUnencode(a)},htmlUnencode:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText||t.text||t.textContent},addStylesheetToHead:function(e,t){var a=t||n.pm.topDoc,o=a.createElement("style");return o.setAttribute("type","text/css"),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(a.createTextNode(e)),a.getElementsByTagName("head")[0].appendChild(o),o},execJS:function(e){try{n.pm.topWin.eval(e)}catch(e){}},reportCFVersions:function(){var e=n.isDebug;n.isDebug=!0;var t="",a="reportCFVersions:uid:"+d+": ";for(var o in n.versions)n.versions.hasOwnProperty(o)&&(a+=t+o+": "+n.versions[o],t=", ");n.log(a),n.isDebug=e},versions:{scriptVer:"0.0.1",scriptLastMod:"2018-06-15",templateVer:"2.0.24",creativeIds:"",creativeVers:"",creativeLastMods:""},onExpandRequested:function(){n.setMarginTop(EBG.API.Adaptor.getViewPortMetrics().height+EBG.API.Adaptor.getScrollLeftTop().Y)},onCollapseRequested:function(){n.setMarginTop(n.marginTop)},setMarginTop:function(e){n.pushDiv.style.setProperty("margin-top",e+"px","important")},loadExternalJSON:function(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&"200"===n.status&&e(n.responseText)},n.send(null)},moveElement:function(e,t,n){switch(n){case"first":e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t);break;case"last":e.appendChild(t);break;case"after":e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t);break;case"before":break;default:e.parentNode.insertBefore(t,e)}},ProgrammaticManager:function(t){n.pm=this,n.pm.constructor=function(){n.pm.readyCallback=t,n.pm.topWin=n.pm.getTopWin(window),n.pm.topDoc=n.pm.topWin.document,n.pm.PROGRAMMATIC_SETTINGS_FILENAME="ProgrammaticSettings_0.json",n.pm.DEFAULT_PROGRAMMATIC_SETTING_FOLDER="_default_",n.pm.mdSettingsFolderPath=EBG.API.Ad.getCustomVar(d,"mdProgSettingsFolderPath"),n.pm.currentFileRequested=null,n.pm.currentDetectMethod=null;var a=!1;e.customJSVars.hasOwnProperty("mdIsDomainConfigEnabled")&&(a=EBG.API.Ad.getCustomVar(d,"mdIsDomainConfigEnabled")),!a&&e.customJSVars.hasOwnProperty("mdIsProgEnabled")&&(a=EBG.API.Ad.getCustomVar(d,"mdIsProgEnabled")),!a&&e.customJSVars.hasOwnProperty("mdProgEnabled")&&(a=EBG.API.Ad.getCustomVar(d,"mdProgEnabled")),!a&&e.customJSVars.hasOwnProperty("mdProgEnable")&&(a=EBG.API.Ad.getCustomVar(d,"mdProgEnable")),n.pm.isEnabled=function(){return!!a},n.pm.isEnabled()?n.pm.getProgrammaticSettings():n.pm.beginExperience()},n.pm.getProgrammaticSettings=function(){var e,t=n.pm.getQueryVariables();if(t&&t.domain)n.pm.currentDetectMethod="queries",e=t.domain;else if(n.pm.currentDetectMethod="cookies",!(e=n.pm.getDomainUsingCookies(n.pm.topDoc.domain))){var a=n.pm.knownTLD(n.pm.topDoc.domain);a&&(n.pm.currentDetectMethod="tld",e=(e=n.pm.topDoc.domain).substring(Math.max(e.lastIndexOf(".",e.length-a-1),0)+1))}e?n.pm.loadSettingsFile(e):n.pm.getDomainUsingClientLoad(n.pm.topDoc.domain)},n.pm.getTopWin=function(e){e=e||window;var t;try{if(void 0===(t=top.document&&top))throw"MacSafariTopWinUFIF"}catch(a){t=n.pm.getParentestFriendlyWin(e)}return void 0===t&&(t=n.pm.getParentestFriendlyWin(e)),t},n.pm.getParentestFriendlyWin=function(e,t){var a;try{if(t=t||e.parent,void 0===(a=e.document&&e))throw"MacSafariWinUFIF";if(t!==e){if(void 0===(a=t.document&&t))return e.document&&e;t!==top&&(a=n.pm.getParentestFriendlyWin(t)||a)}}catch(e){t!==top&&(a=n.pm.getParentestFriendlyWin(t)||a)}if(void 0===a)try{a=e.document&&e}catch(e){}return a},n.pm.getQueryVariables=function(){for(var e={},t={},a=n.pm.topWin.location.search.substring(1).split("&"),o=0;o<a.length;o++)t.name=decodeURIComponent(a[o].substring(0,a[o].indexOf("="))),t.value=decodeURIComponent(a[o].substring(a[o].indexOf("=")+1)),e[t.name]=t.value;return e},n.pm.loadSettingsFile=function(e){n.pm.currentFileRequested=e,EBG.getDataFromRemoteServer(n.pm.buildSettingsURL(e),n.pm.parseJSON,n.pm,!0)||n.pm.beginExperience()},n.pm.knownTLD=function(e){for(var t=[".com",".net",".mobi",".cci.fr",".fr",".com.au",".es",".co.uk",".de",".com.cn",".it",".be",".fi",".co.il",".co.jp",".ne.jp",".jp",".nl",".me",".com.pl",".pl",".tv",".qc.ca",".ca",".io",".io.",".com.vn",".net.vn",".vn",".com.br",".gr",".com.ar",".com.tr",".co.th",".cz",".ch",".dk",".org",".no",".biz",".co.nz",".se",".pt",".com.my",".co",".co.in",".ro",".com.hk",".fm",".com.tw",".com.al",".al",".cc",".web.id",".co.za",".com.mx",".video",".at",".info",".trade",".cl",".sk",".to",".pe",".cn",".us",".in",".lt",".mx",".bg",".eu",".co.id",".com.sg",".gg",".hn",".my",".la",".com.pk",".pk",".com.kw",".guru",".hk",".hr",".lv",".rs",".ee",".com.uy",".asia",".mus.br",".cat",".gov.au",".id",".ru",".gov.uk",".com.cy",".tw",".nu",".online",".ie",".in.th",".hu",".news",".free",".tf",".com.sa",".sa",".lk",".website",".ba",".sc",".com.ph",".ph",".media",".pr",".xyz",".az",".app",".gen.tr",".md",".net.br",".cf",".com.gh",".club",".lu",".com.do",".ws",".co.kr",".eus",".one",".net.au",".social",".si",".am",".pw",".mk",".im",".best",".com.ua",".ua",".lat",".pm",".com.lb",".ae",".dj",".win",".tt"],n=0;n<t.length;n++)if(e.substr(-t[n].length)===t[n])return t[n].length;return 0},n.pm.getDomainUsingCookies=function(e){if(!n.pm.topDoc||!navigator.cookieEnabled)return!1;try{for(var t=0,a="_"+d+"_"+(new Date).getTime(),o=e.split(".");t<o.length-1&&-1===n.pm.topDoc.cookie.indexOf(a+"="+a);)e=o.slice(-1-++t).join("."),n.pm.topDoc.cookie=a+"="+a+";domain="+e+";";-1===n.pm.topDoc.cookie.indexOf(a+"="+a)&&(e="");try{n.pm.topDoc.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+e+";"}catch(e){}return e}catch(e){return!1}},n.pm.getDomainUsingClientLoad=function(e,t){function a(e){return EBG.getDataFromRemoteServer(e,function(e){e?n.pm.parseJSON(e):d.length>0?a(d.shift())||n.pm.beginExperience():n.pm.beginExperience()},n,!0)}var o,i=0,r="",s="",d=[];for(t=[].concat(t),n.pm.currentDetectMethod="clientLoad",o=e.split(".");i<o.length-1;)r=o.slice(-1-++i).join("."),t.indexOf(r)>=0||(s=n.pm.buildSettingsURL(r),d[d.length]=s);d[d.length]=n.pm.buildSettingsURL(n.pm.DEFAULT_PROGRAMMATIC_SETTING_FOLDER),a(d.shift())||n.pm.beginExperience()},n.pm.buildSettingsURL=function(e){return n.pm.topDoc.location.protocol+n.pm.mdSettingsFolderPath+e+"/"+n.pm.PROGRAMMATIC_SETTINGS_FILENAME+"?ord="+d},n.pm.unbuildSettingsURL=function(e){return new RegExp(n.pm.topDoc.location.protocol+n.pm.mdSettingsFolderPath+"(.*)/"+n.pm.PROGRAMMATIC_SETTINGS_FILENAME+"\\?ord="+d).exec(e)[1]},n.pm.parseJSON=function(e){if(!e)return"tld"===n.pm.currentDetectMethod?void n.pm.getDomainUsingClientLoad(n.pm.topDoc.domain,n.pm.currentFileRequested):n.pm.currentFileRequested!==n.pm.DEFAULT_PROGRAMMATIC_SETTING_FOLDER?void n.pm.loadSettingsFile(n.pm.DEFAULT_PROGRAMMATIC_SETTING_FOLDER,n.pm.parseJSON):void n.pm.beginExperience();try{var t=JSON.parse(e).programmaticSettings,a=n.pm.getQueryVariables(),o=null;if(a&&a.settingType)switch(a.settingType){case"Folder":t.hasOwnProperty("folder")&&t.folder.hasOwnProperty(a.settingDetail)&&(o=t.folder[a.settingDetail]);break;case"Subdomain":t.hasOwnProperty("subdomain")&&t.subdomain.hasOwnProperty(a.settingDetail)&&(o=t.subdomain[a.settingDetail]);break;case"Global":t.hasOwnProperty("global")&&(o=t.global)}else{var i;if(!o&&t.folder){var r=t.folder;for(i in r)if(r.hasOwnProperty(i)&&n.pm.hasFolder(i)){o=r[i];break}}if(!o&&t.subdomain){var s=t.subdomain;for(i in s)if(s.hasOwnProperty(i)&&n.pm.hasSubdomain(i)){o=s[i];break}}!o&&t.global&&(o=t.global)}o&&n.pm.setProgrammaticSettings(o),n.pm.beginExperience()}catch(e){n.pm.beginExperience()}},n.pm.hasFolder=function(e){return-1!==n.pm.topDoc.location.pathname.indexOf(e)},n.pm.hasSubdomain=function(e){return-1!==n.pm.topDoc.location.hostname.indexOf(e)||-1!==n.pm.topDoc.location.host.indexOf(e)},n.pm.setProgrammaticSettings=function(e){for(var t in e)e.hasOwnProperty(t)&&n.setDefault(t,e[t],!0)},n.pm.beginExperience=function(){n.pm.readyCallback&&window.setTimeout(n.pm.readyCallback,1)},n.pm.constructor()}},EBG.reportCFV=function(){for(var e in EBG.customFormats)if(EBG.customFormats.hasOwnProperty(e))for(var t in EBG.customFormats[e])if(EBG.customFormats[e].hasOwnProperty(t))try{EBG.customFormats[e][t].reportCFVersions()}catch(e){}},EBG.customFormats[d].PL_AdPulse=new t});